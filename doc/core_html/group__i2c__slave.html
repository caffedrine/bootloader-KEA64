<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Kinetis Bootloader: I2C Slave Driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Kinetis Bootloader
   &#160;<span id="projectnumber">1.2.0</span>
   </div>
   <div id="projectbrief">Common bootloader for Kinetis devices</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Introduction</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__i2c__slave.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#enum-members">Enumerations</a>  </div>
  <div class="headertitle">
<div class="title">I2C Slave Driver<div class="ingroups"><a class="el" href="group__drivers.html">Device Drivers</a> &raquo; <a class="el" href="group__i2c__driver.html">I2C</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>I2C slave mode peripheral driver.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for I2C Slave Driver:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><div class="center"><iframe scrolling="no" frameborder="0" src="group__i2c__slave.svg" width="212" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structi2c__slave__info__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__i2c__slave.html#structi2c__slave__info__t">i2c_slave_info_t</a></td></tr>
<tr class="memdesc:structi2c__slave__info__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Definition of application implemented callback functions used by the I2C slave driver.  <a href="group__i2c__slave.html#structi2c__slave__info__t">More...</a><br /></td></tr>
<tr class="separator:structi2c__slave__info__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga22373c1eb9c531d566720a1b53cd5b07"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__i2c__slave.html#ga22373c1eb9c531d566720a1b53cd5b07">_i2c_errors</a> { <br />
&#160;&#160;<a class="el" href="group__i2c__slave.html#gga22373c1eb9c531d566720a1b53cd5b07a59390c2b988d02e016ec014f9e014557">kStatus_I2C_SlaveTxUnderrun</a> = MAKE_STATUS(kStatusGroup_I2CDriver, 0), 
<br />
&#160;&#160;<a class="el" href="group__i2c__slave.html#gga22373c1eb9c531d566720a1b53cd5b07ab286ded9de770504a53c67c4fa7ee64b">kStatus_I2C_SlaveRxOverrun</a> = MAKE_STATUS(kStatusGroup_I2CDriver, 1), 
<br />
&#160;&#160;<a class="el" href="group__i2c__slave.html#gga22373c1eb9c531d566720a1b53cd5b07a436dd56a766dbe6a7f2bddd7f29463d1">kStatus_I2C_AribtrationLost</a> = MAKE_STATUS(kStatusGroup_I2CDriver, 2)
<br />
 }</td></tr>
<tr class="memdesc:ga22373c1eb9c531d566720a1b53cd5b07"><td class="mdescLeft">&#160;</td><td class="mdescRight">I2C slave driver status codes.  <a href="group__i2c__slave.html#ga22373c1eb9c531d566720a1b53cd5b07">More...</a><br /></td></tr>
<tr class="separator:ga22373c1eb9c531d566720a1b53cd5b07"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
I2C Slave</h2></td></tr>
<tr class="memitem:ga28aad8d37dbe2245bdc60f38eee88337"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__i2c__slave.html#ga28aad8d37dbe2245bdc60f38eee88337">i2c_slave_reset</a> (int instance)</td></tr>
<tr class="memdesc:ga28aad8d37dbe2245bdc60f38eee88337"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the I2C module.  <a href="#ga28aad8d37dbe2245bdc60f38eee88337">More...</a><br /></td></tr>
<tr class="separator:ga28aad8d37dbe2245bdc60f38eee88337"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9f69c065ed2ccfff83b5d88095ab32ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__i2c__slave.html#ga9f69c065ed2ccfff83b5d88095ab32ef">i2c_slave_init</a> (int instance, <a class="el" href="group__i2c__slave.html#structi2c__slave__info__t">i2c_slave_info_t</a> *appInfo)</td></tr>
<tr class="memdesc:ga9f69c065ed2ccfff83b5d88095ab32ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the I2C module.  <a href="#ga9f69c065ed2ccfff83b5d88095ab32ef">More...</a><br /></td></tr>
<tr class="separator:ga9f69c065ed2ccfff83b5d88095ab32ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0c6f5e51c9159dcf1f8135536f349b40"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__i2c__slave.html#ga0c6f5e51c9159dcf1f8135536f349b40">i2c_slave_deinit</a> (int instance)</td></tr>
<tr class="memdesc:ga0c6f5e51c9159dcf1f8135536f349b40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deinitializes the device.  <a href="#ga0c6f5e51c9159dcf1f8135536f349b40">More...</a><br /></td></tr>
<tr class="separator:ga0c6f5e51c9159dcf1f8135536f349b40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0a63f0f55a59c6f29243750821a57160"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__i2c__slave.html#ga0a63f0f55a59c6f29243750821a57160">i2c_set_glitch_filter_width</a> (int instance, uint32_t busClock_Hz, uint32_t glitchWidth_ns)</td></tr>
<tr class="memdesc:ga0a63f0f55a59c6f29243750821a57160"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure I2C to filter glitches below a certain width.  <a href="#ga0a63f0f55a59c6f29243750821a57160">More...</a><br /></td></tr>
<tr class="separator:ga0a63f0f55a59c6f29243750821a57160"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2ef8cd50e04ca7db6bf6e7a566c3bfff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__i2c__slave.html#ga2ef8cd50e04ca7db6bf6e7a566c3bfff">i2c_slave_set_data_sink_func</a> (uint32_t instance, void(*data_sink)(uint8_t, uint32_t))</td></tr>
<tr class="memdesc:ga2ef8cd50e04ca7db6bf6e7a566c3bfff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the data sink function pointer.  <a href="#ga2ef8cd50e04ca7db6bf6e7a566c3bfff">More...</a><br /></td></tr>
<tr class="separator:ga2ef8cd50e04ca7db6bf6e7a566c3bfff"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Usage Information</h2>
<p>I2C slave mode peripheral driver. </p>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structi2c__slave__info__t" id="structi2c__slave__info__t"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct i2c_slave_info_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Definition of application implemented callback functions used by the I2C slave driver. </p>
</div><table class="memberdecls">
<tr><td colspan="2"><h3>Data Fields</h3></td></tr>
<tr class="memitem:a4fc19f424bb4547389087cf21c796060"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4fc19f424bb4547389087cf21c796060"></a>
void(*&#160;</td><td class="memItemRight" valign="bottom"><b>data_source</b> )(uint8_t *source_byte)</td></tr>
<tr class="separator:a4fc19f424bb4547389087cf21c796060"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80fbcb0a20a63361c3865e70bf3affc9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a80fbcb0a20a63361c3865e70bf3affc9"></a>
void(*&#160;</td><td class="memItemRight" valign="bottom"><b>data_sink</b> )(uint8_t sink_byte, uint32_t instance)</td></tr>
<tr class="separator:a80fbcb0a20a63361c3865e70bf3affc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a987cbb1bdf2a863a5bcb62e342fa33b7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a987cbb1bdf2a863a5bcb62e342fa33b7"></a>
void(*&#160;</td><td class="memItemRight" valign="bottom"><b>on_error</b> )(uint32_t instance)</td></tr>
<tr class="separator:a987cbb1bdf2a863a5bcb62e342fa33b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb6e6d45dca516476187de764855669"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4fb6e6d45dca516476187de764855669"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>slaveAddress</b></td></tr>
<tr class="separator:a4fb6e6d45dca516476187de764855669"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="ga22373c1eb9c531d566720a1b53cd5b07"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__i2c__slave.html#ga22373c1eb9c531d566720a1b53cd5b07">_i2c_errors</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>I2C slave driver status codes. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="gga22373c1eb9c531d566720a1b53cd5b07a59390c2b988d02e016ec014f9e014557"></a>kStatus_I2C_SlaveTxUnderrun&#160;</td><td class="fielddoc">
<p>I2C Slave TX Underrun error. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gga22373c1eb9c531d566720a1b53cd5b07ab286ded9de770504a53c67c4fa7ee64b"></a>kStatus_I2C_SlaveRxOverrun&#160;</td><td class="fielddoc">
<p>I2C Slave RX Overrun error. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gga22373c1eb9c531d566720a1b53cd5b07a436dd56a766dbe6a7f2bddd7f29463d1"></a>kStatus_I2C_AribtrationLost&#160;</td><td class="fielddoc">
<p>I2C Arbitration Lost error. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga0a63f0f55a59c6f29243750821a57160"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_set_glitch_filter_width </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>busClock_Hz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>glitchWidth_ns</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure I2C to filter glitches below a certain width. </p>
<p>The glitch filter width will be set to as close to just below the requested width as is possible given the bus clock frequency. If a single bus clock cycle is longer than the requested width, the filter will be set to a single cycle. However, if the bus clock cycle is more than 10 times the requested width, the glitch filter will be disabled. </p>

</div>
</div>
<a class="anchor" id="ga0c6f5e51c9159dcf1f8135536f349b40"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_slave_deinit </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deinitializes the device. </p>
<p>Clears the control register and turns off the clock to the module.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>Instance number of the I2C module. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga9f69c065ed2ccfff83b5d88095ab32ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_slave_init </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__i2c__slave.html#structi2c__slave__info__t">i2c_slave_info_t</a> *&#160;</td>
          <td class="paramname"><em>appInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the I2C module. </p>
<p>Saves the application callback info, turns on the clock to the module, Enables the device and enables interrupts. Set the I2C to slave mode. IOMux is expected to already be handled in <a class="el" href="group__bl__hw.html#gac12d42451976d7da38d4935131e7d8ac" title="Initialize the hardware such as pinmux. ">init_hardware()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>Instance number of the I2C module. </td></tr>
    <tr><td class="paramname">appInfo</td><td>Pointer of application information </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga28aad8d37dbe2245bdc60f38eee88337"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_slave_reset </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resets the I2C module. </p>
<p>Restore those control and configuration registers which are used to be operated</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>Instance number of the I2C module. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga2ef8cd50e04ca7db6bf6e7a566c3bfff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_slave_set_data_sink_func </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(uint8_t, uint32_t)&#160;</td>
          <td class="paramname"><em>data_sink</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the data sink function pointer. </p>
<p>Set the data sink function pointer</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>Instance number of the I2C module. </td></tr>
    <tr><td class="paramname">data_sink</td><td>Pointer to data_sink function. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Jun 3 2015 16:21:26 for Kinetis Bootloader by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
