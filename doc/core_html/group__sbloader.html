<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Kinetis Bootloader: SB Loader</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Kinetis Bootloader
   &#160;<span id="projectnumber">1.2.0</span>
   </div>
   <div id="projectbrief">Common bootloader for Kinetis devices</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Introduction</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__sbloader.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">SB Loader</div>  </div>
</div><!--header-->
<div class="contents">

<p>SB file loader state machine.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for SB Loader:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><div class="center"><iframe scrolling="no" frameborder="0" src="group__sbloader.svg" width="252" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__sb__file__format"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sb__file__format.html">SB File Format</a></td></tr>
<tr class="memdesc:group__sb__file__format"><td class="mdescLeft">&#160;</td><td class="mdescRight">SB file format definitions. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structboot__cmd__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#structboot__cmd__t">boot_cmd_t</a></td></tr>
<tr class="memdesc:structboot__cmd__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Boot command definition.  <a href="group__sbloader.html#structboot__cmd__t">More...</a><br /></td></tr>
<tr class="separator:structboot__cmd__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structboot__hdr1__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#structboot__hdr1__t">boot_hdr1_t</a></td></tr>
<tr class="memdesc:structboot__hdr1__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Definition for boot image file header chunk 1.  <a href="group__sbloader.html#structboot__hdr1__t">More...</a><br /></td></tr>
<tr class="separator:structboot__hdr1__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structboot__hdr2__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#structboot__hdr2__t">boot_hdr2_t</a></td></tr>
<tr class="memdesc:structboot__hdr2__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Definition for boot image file header chunk 2.  <a href="group__sbloader.html#structboot__hdr2__t">More...</a><br /></td></tr>
<tr class="separator:structboot__hdr2__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:struct__ldr___context"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#struct__ldr___context">ldr_Context_t</a></td></tr>
<tr class="memdesc:struct__ldr___context"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loader context definition.  <a href="group__sbloader.html#struct__ldr___context">More...</a><br /></td></tr>
<tr class="separator:struct__ldr___context"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:struct__ldr__buf"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#struct__ldr__buf">ldr_buf_t</a></td></tr>
<tr class="separator:struct__ldr__buf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga91cd342631b2d6671e45540010036636"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga91cd342631b2d6671e45540010036636"></a>
typedef uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>chunk_t</b>[BYTES_PER_CHUNK]</td></tr>
<tr class="separator:ga91cd342631b2d6671e45540010036636"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab11ac618387b67ded6844e33aa5199fa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gab11ac618387b67ded6844e33aa5199fa"></a>
typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#gab11ac618387b67ded6844e33aa5199fa">pLdrFnc_t</a>) (ldr_Context_t *)</td></tr>
<tr class="memdesc:gab11ac618387b67ded6844e33aa5199fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function pointer definition for all loader action functions. <br /></td></tr>
<tr class="separator:gab11ac618387b67ded6844e33aa5199fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5d25aba041950269412e47557d907ee6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5d25aba041950269412e47557d907ee6"></a>
typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#ga5d25aba041950269412e47557d907ee6">pJumpFnc_t</a>) (uint32_t)</td></tr>
<tr class="memdesc:ga5d25aba041950269412e47557d907ee6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Jump command function pointer definition. <br /></td></tr>
<tr class="separator:ga5d25aba041950269412e47557d907ee6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae7e313e395b2df0802c1aae65ce7abef"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gae7e313e395b2df0802c1aae65ce7abef"></a>
typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#gae7e313e395b2df0802c1aae65ce7abef">pCallFnc_t</a>) (uint32_t, uint32_t *)</td></tr>
<tr class="memdesc:gae7e313e395b2df0802c1aae65ce7abef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call command function pointer definition. <br /></td></tr>
<tr class="separator:gae7e313e395b2df0802c1aae65ce7abef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga776140b8326b3fbe0d466c71e7f424e4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga776140b8326b3fbe0d466c71e7f424e4"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#ga776140b8326b3fbe0d466c71e7f424e4">_sbloader_status</a> { <br />
&#160;&#160;<b>kStatusRomLdrSectionOverrun</b> = MAKE_STATUS(kStatusGroup_SBLoader, 0), 
<br />
&#160;&#160;<b>kStatusRomLdrSignature</b> = MAKE_STATUS(kStatusGroup_SBLoader, 1), 
<br />
&#160;&#160;<b>kStatusRomLdrSectionLength</b> = MAKE_STATUS(kStatusGroup_SBLoader, 2), 
<br />
&#160;&#160;<b>kStatusRomLdrUnencryptedOnly</b> = MAKE_STATUS(kStatusGroup_SBLoader, 3), 
<br />
&#160;&#160;<b>kStatusRomLdrEOFReached</b> = MAKE_STATUS(kStatusGroup_SBLoader, 4), 
<br />
&#160;&#160;<b>kStatusRomLdrChecksum</b> = MAKE_STATUS(kStatusGroup_SBLoader, 5), 
<br />
&#160;&#160;<b>kStatusRomLdrCrc32Error</b> = MAKE_STATUS(kStatusGroup_SBLoader, 6), 
<br />
&#160;&#160;<b>kStatusRomLdrUnknownCommand</b> = MAKE_STATUS(kStatusGroup_SBLoader, 7), 
<br />
&#160;&#160;<b>kStatusRomLdrIdNotFound</b> = MAKE_STATUS(kStatusGroup_SBLoader, 8), 
<br />
&#160;&#160;<b>kStatusRomLdrDataUnderrun</b> = MAKE_STATUS(kStatusGroup_SBLoader, 9), 
<br />
&#160;&#160;<b>kStatusRomLdrJumpReturned</b> = MAKE_STATUS(kStatusGroup_SBLoader, 10), 
<br />
&#160;&#160;<b>kStatusRomLdrCallFailed</b> = MAKE_STATUS(kStatusGroup_SBLoader, 11), 
<br />
&#160;&#160;<b>kStatusRomLdrKeyNotFound</b> = MAKE_STATUS(kStatusGroup_SBLoader, 12), 
<br />
&#160;&#160;<b>kStatusRomLdrSecureOnly</b> = MAKE_STATUS(kStatusGroup_SBLoader, 13)
<br />
 }</td></tr>
<tr class="memdesc:ga776140b8326b3fbe0d466c71e7f424e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">SB loader status codes. <br /></td></tr>
<tr class="separator:ga776140b8326b3fbe0d466c71e7f424e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga196130e1b193207247c017a437943ea5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga196130e1b193207247c017a437943ea5"></a>
<a class="el" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#ga196130e1b193207247c017a437943ea5">sbloader_init</a> (void)</td></tr>
<tr class="memdesc:ga196130e1b193207247c017a437943ea5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the loader state machine. <br /></td></tr>
<tr class="separator:ga196130e1b193207247c017a437943ea5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3235bfe8a0d7df4fb1b4c398b9f45108"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga3235bfe8a0d7df4fb1b4c398b9f45108"></a>
<a class="el" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#ga3235bfe8a0d7df4fb1b4c398b9f45108">sbloader_pump</a> (uint8_t *data, unsigned int length)</td></tr>
<tr class="memdesc:ga3235bfe8a0d7df4fb1b4c398b9f45108"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pump the loader state machine. <br /></td></tr>
<tr class="separator:ga3235bfe8a0d7df4fb1b4c398b9f45108"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga38c6ca3aa025abfbff1244875f2c97cc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga38c6ca3aa025abfbff1244875f2c97cc"></a>
<a class="el" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#ga38c6ca3aa025abfbff1244875f2c97cc">sbloader_finalize_jump</a> ()</td></tr>
<tr class="memdesc:ga38c6ca3aa025abfbff1244875f2c97cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implement jump if last command was ROM_JUMP_CMD. <br /></td></tr>
<tr class="separator:ga38c6ca3aa025abfbff1244875f2c97cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6c85e96bf9b72b3f2e34385dbfe8b97f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#ga6c85e96bf9b72b3f2e34385dbfe8b97f">ldr_GoToNextSection</a> (ldr_Context_t *)</td></tr>
<tr class="memdesc:ga6c85e96bf9b72b3f2e34385dbfe8b97f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loader utilities.  <a href="#ga6c85e96bf9b72b3f2e34385dbfe8b97f">More...</a><br /></td></tr>
<tr class="separator:ga6c85e96bf9b72b3f2e34385dbfe8b97f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4c7887c97e9f07681ad1be30dab94987"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga4c7887c97e9f07681ad1be30dab94987"></a>
<a class="el" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#ga4c7887c97e9f07681ad1be30dab94987">sbloader_handle_chunk</a> (void)</td></tr>
<tr class="memdesc:ga4c7887c97e9f07681ad1be30dab94987"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the chunk in the s_loaderBuf. <br /></td></tr>
<tr class="separator:ga4c7887c97e9f07681ad1be30dab94987"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga08fb4f865473d3c330ba4091416ce7fb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#ga08fb4f865473d3c330ba4091416ce7fb">ldr_DoHeader</a> (ldr_Context_t *)</td></tr>
<tr class="memdesc:ga08fb4f865473d3c330ba4091416ce7fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loader action (context.Action) functions for header processing.  <a href="#ga08fb4f865473d3c330ba4091416ce7fb">More...</a><br /></td></tr>
<tr class="separator:ga08fb4f865473d3c330ba4091416ce7fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab008ca0a26303b427e73f72cc7350841"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#gab008ca0a26303b427e73f72cc7350841">ldr_DoHeader1</a> (ldr_Context_t *context)</td></tr>
<tr class="memdesc:gab008ca0a26303b427e73f72cc7350841"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loader action function processes header chunk 1.  <a href="#gab008ca0a26303b427e73f72cc7350841">More...</a><br /></td></tr>
<tr class="separator:gab008ca0a26303b427e73f72cc7350841"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga10fe3a0f3adc3839cf3c5b46a243e8c1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#ga10fe3a0f3adc3839cf3c5b46a243e8c1">ldr_DoHeader2</a> (ldr_Context_t *context)</td></tr>
<tr class="memdesc:ga10fe3a0f3adc3839cf3c5b46a243e8c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loader action function processes header chunk 2.  <a href="#ga10fe3a0f3adc3839cf3c5b46a243e8c1">More...</a><br /></td></tr>
<tr class="separator:ga10fe3a0f3adc3839cf3c5b46a243e8c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0049471d3fe8b9d8caccb3417836bc85"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#ga0049471d3fe8b9d8caccb3417836bc85">ldr_DoHeaderMac</a> (ldr_Context_t *context)</td></tr>
<tr class="memdesc:ga0049471d3fe8b9d8caccb3417836bc85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loader action function finishes CBC-MAC over final header chunks.  <a href="#ga0049471d3fe8b9d8caccb3417836bc85">More...</a><br /></td></tr>
<tr class="separator:ga0049471d3fe8b9d8caccb3417836bc85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga359cb64ded6184ec3237924e1d489f9c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#ga359cb64ded6184ec3237924e1d489f9c">ldr_DoKeyTest</a> (ldr_Context_t *context)</td></tr>
<tr class="memdesc:ga359cb64ded6184ec3237924e1d489f9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loader action function tests for a key dictionary match.  <a href="#ga359cb64ded6184ec3237924e1d489f9c">More...</a><br /></td></tr>
<tr class="separator:ga359cb64ded6184ec3237924e1d489f9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0b6aac7b3b933de983dd7b20a0a71dfa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#ga0b6aac7b3b933de983dd7b20a0a71dfa">ldr_DoGetDek</a> (ldr_Context_t *context)</td></tr>
<tr class="memdesc:ga0b6aac7b3b933de983dd7b20a0a71dfa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loader action function processes a key dictionary match.  <a href="#ga0b6aac7b3b933de983dd7b20a0a71dfa">More...</a><br /></td></tr>
<tr class="separator:ga0b6aac7b3b933de983dd7b20a0a71dfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad4ba3d76f1d6c2be59aa4822161e7080"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad4ba3d76f1d6c2be59aa4822161e7080"></a>
<a class="el" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#gad4ba3d76f1d6c2be59aa4822161e7080">ldr_DoInit</a> (ldr_Context_t *)</td></tr>
<tr class="memdesc:gad4ba3d76f1d6c2be59aa4822161e7080"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loader action (context.Action) functions for command processing. <br /></td></tr>
<tr class="separator:gad4ba3d76f1d6c2be59aa4822161e7080"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf82590b20d223f900afb0526629af78c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#gaf82590b20d223f900afb0526629af78c">ldr_DoCommand</a> (ldr_Context_t *context)</td></tr>
<tr class="memdesc:gaf82590b20d223f900afb0526629af78c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loader boot command parsing function.  <a href="#gaf82590b20d223f900afb0526629af78c">More...</a><br /></td></tr>
<tr class="separator:gaf82590b20d223f900afb0526629af78c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0496db4b513d904caa7cff9bfd3a3b1a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#ga0496db4b513d904caa7cff9bfd3a3b1a">ldr_DoLoadBytes</a> (ldr_Context_t *context)</td></tr>
<tr class="memdesc:ga0496db4b513d904caa7cff9bfd3a3b1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loader action function loads the trailing "ragged edge bytes".  <a href="#ga0496db4b513d904caa7cff9bfd3a3b1a">More...</a><br /></td></tr>
<tr class="separator:ga0496db4b513d904caa7cff9bfd3a3b1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad336bbae43e8ca08f9300397b316d0bb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#gad336bbae43e8ca08f9300397b316d0bb">ldr_DoLoadChunks</a> (ldr_Context_t *context)</td></tr>
<tr class="memdesc:gad336bbae43e8ca08f9300397b316d0bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loader action function loads data chunks.  <a href="#gad336bbae43e8ca08f9300397b316d0bb">More...</a><br /></td></tr>
<tr class="separator:gad336bbae43e8ca08f9300397b316d0bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga179d2dbc48908c8880f0d1c38fdf0118"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#ga179d2dbc48908c8880f0d1c38fdf0118">ldr_DoLoadCmd</a> (ldr_Context_t *context)</td></tr>
<tr class="memdesc:ga179d2dbc48908c8880f0d1c38fdf0118"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loader "load" command handler.  <a href="#ga179d2dbc48908c8880f0d1c38fdf0118">More...</a><br /></td></tr>
<tr class="separator:ga179d2dbc48908c8880f0d1c38fdf0118"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga391e8156461e75bf9c458a8c239aa668"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#ga391e8156461e75bf9c458a8c239aa668">ldr_DoFillCmd</a> (ldr_Context_t *context)</td></tr>
<tr class="memdesc:ga391e8156461e75bf9c458a8c239aa668"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loader "fill" command handler.  <a href="#ga391e8156461e75bf9c458a8c239aa668">More...</a><br /></td></tr>
<tr class="separator:ga391e8156461e75bf9c458a8c239aa668"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3a3306081691ef431d63ce7ad1ade981"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#ga3a3306081691ef431d63ce7ad1ade981">ldr_DoJumpCmd</a> (ldr_Context_t *context)</td></tr>
<tr class="memdesc:ga3a3306081691ef431d63ce7ad1ade981"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loader "jump" command handler.  <a href="#ga3a3306081691ef431d63ce7ad1ade981">More...</a><br /></td></tr>
<tr class="separator:ga3a3306081691ef431d63ce7ad1ade981"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga08fefb64c1909e91cc855695d4c29d88"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#ga08fefb64c1909e91cc855695d4c29d88">ldr_DoCallCmd</a> (ldr_Context_t *context)</td></tr>
<tr class="memdesc:ga08fefb64c1909e91cc855695d4c29d88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loader "call" command handler.  <a href="#ga08fefb64c1909e91cc855695d4c29d88">More...</a><br /></td></tr>
<tr class="separator:ga08fefb64c1909e91cc855695d4c29d88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga16375b0cc8350f605d7cf5f2c2302b99"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#ga16375b0cc8350f605d7cf5f2c2302b99">ldr_DoTagCmd</a> (ldr_Context_t *context)</td></tr>
<tr class="memdesc:ga16375b0cc8350f605d7cf5f2c2302b99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loader "tag" command handler.  <a href="#ga16375b0cc8350f605d7cf5f2c2302b99">More...</a><br /></td></tr>
<tr class="separator:ga16375b0cc8350f605d7cf5f2c2302b99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabd574bf6ff4543b4e4bb642de4edd0ad"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#gabd574bf6ff4543b4e4bb642de4edd0ad">ldr_DoEraseCmd</a> (ldr_Context_t *context)</td></tr>
<tr class="memdesc:gabd574bf6ff4543b4e4bb642de4edd0ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loader "erase" command handler.  <a href="#gabd574bf6ff4543b4e4bb642de4edd0ad">More...</a><br /></td></tr>
<tr class="separator:gabd574bf6ff4543b4e4bb642de4edd0ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga6900924e02ee40bd281f9655a672a5cc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga6900924e02ee40bd281f9655a672a5cc"></a>
static ldr_Context_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#ga6900924e02ee40bd281f9655a672a5cc">s_loaderContext</a></td></tr>
<tr class="memdesc:ga6900924e02ee40bd281f9655a672a5cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">static loader context data. <br /></td></tr>
<tr class="separator:ga6900924e02ee40bd281f9655a672a5cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8bd4c85b5ac97233a4f6d141a8b3b838"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga8bd4c85b5ac97233a4f6d141a8b3b838"></a>
static ldr_buf_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#ga8bd4c85b5ac97233a4f6d141a8b3b838">s_loaderBuf</a></td></tr>
<tr class="memdesc:ga8bd4c85b5ac97233a4f6d141a8b3b838"><td class="mdescLeft">&#160;</td><td class="mdescRight">static buffer queueing up a chunk worth of data <br /></td></tr>
<tr class="separator:ga8bd4c85b5ac97233a4f6d141a8b3b838"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga44f04e86cd75f107e97ea3f948fc65c7"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbloader.html#ga44f04e86cd75f107e97ea3f948fc65c7">s_aesKey</a> [AES_128_KEY_SIZE_WORDS]</td></tr>
<tr class="separator:ga44f04e86cd75f107e97ea3f948fc65c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Usage Information</h2>
<p>SB file loader state machine. </p>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structboot__cmd__t" id="structboot__cmd__t"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct boot_cmd_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Boot command definition. </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a21a8ca585296632d7918dcfc8bcf200c"></a>uint32_t</td>
<td class="fieldname">
address</td>
<td class="fielddoc">
address argument </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a36d5708186849ded9d7e05c860e47567"></a>uint8_t</td>
<td class="fieldname">
checksum</td>
<td class="fielddoc">
8-bit checksum over command chunk </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ae8e7896cc6c13246d68a8f57779ff2b0"></a>uint32_t</td>
<td class="fieldname">
count</td>
<td class="fielddoc">
count argument </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="aef923cff9098c76196a5148b48d85642"></a>uint32_t</td>
<td class="fieldname">
data</td>
<td class="fielddoc">
data argument </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="af1cbb4c406b08d56d433f09fb5e77670"></a>uint16_t</td>
<td class="fieldname">
flags</td>
<td class="fielddoc">
command flags (modifier) </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a57bc16ad24072823c7c7a3c1943607b5"></a>uint8_t</td>
<td class="fieldname">
tag</td>
<td class="fielddoc">
command tag (identifier) </td></tr>
</table>

</div>
</div>
<a name="structboot__hdr1__t" id="structboot__hdr1__t"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct boot_hdr1_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Definition for boot image file header chunk 1. </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a6bfc76ee4ae5134969453e06db2fdfc4"></a>uint32_t</td>
<td class="fieldname">
fileChunks</td>
<td class="fielddoc">
total chunks in the file </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a6713be472bfce61ef2ce5193c7e8acbf"></a>uint16_t</td>
<td class="fieldname">
fileFlags</td>
<td class="fielddoc">
global file flags </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a0eb863cb9bfc4195f56726f523f7bebe"></a>uint32_t</td>
<td class="fieldname">
hash</td>
<td class="fielddoc">
last 32-bits of SHA-1 hash </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a522f4c9e9eac37eb1b88b19bbcb32986"></a>uint8_t</td>
<td class="fieldname">
major</td>
<td class="fielddoc">
major file format version </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a671fc6fb34ff1aedee94c78250cb3fb0"></a>uint8_t</td>
<td class="fieldname">
minor</td>
<td class="fielddoc">
minor file format version </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a1e56021db51e65b583acac1b0d46e43d"></a>uint32_t</td>
<td class="fieldname">
signature</td>
<td class="fielddoc">
must equal "STMP" </td></tr>
</table>

</div>
</div>
<a name="structboot__hdr2__t" id="structboot__hdr2__t"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct boot_hdr2_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Definition for boot image file header chunk 2. </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a4a88fde399c5b24c1660cce55eaf0368"></a>uint32_t</td>
<td class="fieldname">
bootOffset</td>
<td class="fielddoc">
chunk offset to the first boot section </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a7c3a00bbc35d6464a70ef5d01febabe7"></a>uint32_t</td>
<td class="fieldname">
bootSectID</td>
<td class="fielddoc">
section ID of the first boot section </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a3cba19357570d5cff65fcce853029ef6"></a>uint16_t</td>
<td class="fieldname">
hdrChunks</td>
<td class="fielddoc">
number of chunks in the header </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a91faaa16494065ecfaca577b2f668960"></a>uint16_t</td>
<td class="fieldname">
keyCount</td>
<td class="fielddoc">
number of keys in the key dictionary </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="abd077477741ed83bfb4531a4f89edbe0"></a>uint16_t</td>
<td class="fieldname">
keyOffset</td>
<td class="fielddoc">
chunk offset to the key dictionary </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a2480a41a297d14c742e6bff170b7d3a8"></a>uint16_t</td>
<td class="fieldname">
sectCount</td>
<td class="fielddoc">
number of sections in the image </td></tr>
</table>

</div>
</div>
<a name="struct__ldr___context" id="struct__ldr___context"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct _ldr_Context</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Loader context definition. </p>
</div><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for ldr_Context_t:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="struct__ldr___context__coll__graph.svg" width="224" height="127"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="af390bd37fc4c7f980b997b4c9aa0ca4b"></a><a class="el" href="group__sbloader.html#gab11ac618387b67ded6844e33aa5199fa">pLdrFnc_t</a></td>
<td class="fieldname">
Action</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a81667303489b7259a752bbf093a0cfa3"></a><a class="el" href="group__sbloader.html#structboot__cmd__t">boot_cmd_t</a></td>
<td class="fieldname">
bootCmd</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a332985f84084f312a984b936fb9d38c2"></a>uint32_t</td>
<td class="fieldname">
bootSectChunks</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a1752021991f7ac9ed0a12db173b9e387"></a><a class="el" href="group__crc32.html#structcrc32__data__t">crc32_data_t</a></td>
<td class="fieldname">
crc32</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a33cb485d048a3e835f42adcd6bbb4003"></a>chunk_t</td>
<td class="fieldname">
dek</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="af935616cca93321ccc4551e9f5e9a188"></a>uint32_t</td>
<td class="fieldname">
fileChunks</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a23d24fcc7dc9c1664e37e72ddca80be6"></a>uint16_t</td>
<td class="fieldname">
fileFlags</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a0e1579b32146d9b92a1bede0c554664f"></a>chunk_t</td>
<td class="fieldname">
initVector</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="af444e6a1d2c32b5cb48825b573bef8a7"></a>uint16_t</td>
<td class="fieldname">
keyCount</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a4f760d91d684790f14c08e9590456dcb"></a>uint32_t</td>
<td class="fieldname">
objectID</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="af3c81eaaba8593a7405bddc5aebfad6a"></a>uint32_t</td>
<td class="fieldname">
receivedChunks</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a1eafb9ce96c6cc56241bd9677dbb514a"></a>chunk_t</td>
<td class="fieldname">
scratchPad</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a2e9ab74c6fe797a4f9183d7481e4f575"></a>uint32_t</td>
<td class="fieldname">
sectChunks</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="abf4c2d3ae563a9cdda82eaada402d6bf"></a>uint32_t</td>
<td class="fieldname">
skipCount</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a41460f6b2e077888c9fa190b5c3294d5"></a>bool</td>
<td class="fieldname">
skipToEnd</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ad5c496a50e3b6e972acbd1215d061ea2"></a>uint8_t *</td>
<td class="fieldname">
src</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a name="struct__ldr__buf" id="struct__ldr__buf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct _ldr_buf</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"></div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ac589811126c7382ac3d26e6cb522791f"></a>chunk_t</td>
<td class="fieldname">
data</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ac4eababbfc10f90d75bd7c570d3d29bf"></a>unsigned int</td>
<td class="fieldname">
fillPosition</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga08fefb64c1909e91cc855695d4c29d88"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a> ldr_DoCallCmd </td>
          <td>(</td>
          <td class="paramtype">ldr_Context_t *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loader "call" command handler. </p>
<p>Implements the action function for the boot "call" command.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Pointer to a loader context structure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>context-&gt;bootCmd contains the boot command.</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>*context is setup to get the next boot command. </dd>
<dd>
context-&gt;objectID is set to the next boot section or image ID.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Return code from plugin or ldr_GoToNextSection. </dd></dl>

</div>
</div>
<a class="anchor" id="gaf82590b20d223f900afb0526629af78c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a> ldr_DoCommand </td>
          <td>(</td>
          <td class="paramtype">ldr_Context_t *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loader boot command parsing function. </p>
<p>Implements the action function for parsing a boot command. Performs generic integrity tests and flag handling, then calls the appropriate command handler function based on the command tag.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Pointer to a loader context structure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>context-&gt;bootCmd contains the boot command.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">kStatusRomLdrChecksum</td><td>if command checksum failed. </td></tr>
    <tr><td class="paramname">kStatusRomLdrUnknownCommand</td><td>if command tag is not recognized. </td></tr>
    <tr><td class="paramname">Return</td><td>code from the boot command handler function. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gabd574bf6ff4543b4e4bb642de4edd0ad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a> ldr_DoEraseCmd </td>
          <td>(</td>
          <td class="paramtype">ldr_Context_t *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loader "erase" command handler. </p>
<p>Implements the action function for the boot "erase" command.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Pointer to a loader context structure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>context-&gt;bootCmd contains the boot command.</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>*context is setup to get the next boot command. </dd>
<dd>
context-&gt;sectChunks is updated to the next section.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">kStatus_Success</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga391e8156461e75bf9c458a8c239aa668"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a> ldr_DoFillCmd </td>
          <td>(</td>
          <td class="paramtype">ldr_Context_t *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loader "fill" command handler. </p>
<p>Implements the action function for the boot "fill" command.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Pointer to a loader context structure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>context-&gt;bootCmd contains the boot command.</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>*context is left setup to get the next boot command.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">kStatus_Success</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga0b6aac7b3b933de983dd7b20a0a71dfa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldr_DoGetDek </td>
          <td>(</td>
          <td class="paramtype">ldr_Context_t *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loader action function processes a key dictionary match. </p>
<p>This loader action function is one of three functions used to parse the key dictionary. It is called after a match of the CBC-MAC is found and the session key (DEK) is decrypted. It saves the DEK in the boot context and then skips to the first boot command in the image. This function will only get called if CBC_MAC is supported</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Pointer to a loader context structure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>context-&gt;src points to the the encrypted session key. </dd>
<dd>
context-&gt;initVector contains the SHA-1 chunk from the header</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>*context is setup to decrypt the first boot command. </dd>
<dd>
The session key is decrypted and stored in the context dek field</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Return value from <a class="el" href="group__sbloader.html#ga6c85e96bf9b72b3f2e34385dbfe8b97f" title="Loader utilities. ">ldr_GoToNextSection()</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="ga08fb4f865473d3c330ba4091416ce7fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldr_DoHeader </td>
          <td>(</td>
          <td class="paramtype">ldr_Context_t *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loader action (context.Action) functions for header processing. </p>
<p>Loader action function processes the first header chunk.</p>
<p>Processes the first header chunk of the boot image file, which saves the SHA-1 to the context initVector field, the CBC-MAC process is started here to handle the DEK if one is found</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Pointer to a loader context structure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>context-&gt;src points at the current header chunk.</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>context-&gt;Action is set to process the next header chunk.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SUCCESS</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gab008ca0a26303b427e73f72cc7350841"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldr_DoHeader1 </td>
          <td>(</td>
          <td class="paramtype">ldr_Context_t *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loader action function processes header chunk 1. </p>
<p>Processes the second header chunk of the boot image file, which contains the file signature, version, flags and chunk count.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Pointer to a loader context structure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>context-&gt;src points at the current header chunk.</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>context-&gt;Action is set to process the next header chunk. </dd>
<dd>
context-&gt;fileChunks and fileFlags are set to the header values.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">kStatus_Success</td><td></td></tr>
    <tr><td class="paramname">kStatusRomLdrSignature</td><td>if the signature or version are incorrect. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga10fe3a0f3adc3839cf3c5b46a243e8c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldr_DoHeader2 </td>
          <td>(</td>
          <td class="paramtype">ldr_Context_t *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loader action function processes header chunk 2. </p>
<p>Processes the third header chunk of the boot image file, which contains parameters for the first boot section and the key dictionary.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Pointer to a loader context structure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>context-&gt;src points at the current header chunk.</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>context-&gt;Action is set to process the next header chunk. </dd>
<dd>
context-&gt;sectChunks, objectID and keyCount are set to the header values.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">kStatus_Success</td><td></td></tr>
    <tr><td class="paramname">kStatusRomLdrSectionLength</td><td>if the bootOffset is out of range. </td></tr>
    <tr><td class="paramname">kStatusRomLdrUnencryptedOnly</td><td>if the unencrypted image is disabled. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga0049471d3fe8b9d8caccb3417836bc85"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldr_DoHeaderMac </td>
          <td>(</td>
          <td class="paramtype">ldr_Context_t *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loader action function finishes CBC-MAC over final header chunks. </p>
<p>Completes the CBC-MAC calculation over the remaining plaintext header. This function will only get called if CBC_MAC is supported</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Pointer to a loader context structure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>context-&gt;src points at the current header chunk. </dd>
<dd>
context-&gt;bootCmd.count = number of chunks left in plaintext header.</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>context-&gt;scratchPad contains the computed CBC-MAC. </dd>
<dd>
context-&gt;bootCmd.count is updated.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SUCCESS</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga3a3306081691ef431d63ce7ad1ade981"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a> ldr_DoJumpCmd </td>
          <td>(</td>
          <td class="paramtype">ldr_Context_t *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loader "jump" command handler. </p>
<p>Implements the action function for the boot "jump" command.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Pointer to a loader context structure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>context-&gt;bootCmd contains the boot command.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">kStatusRomLdrJumpReturned</td><td>if the plugin returns </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga359cb64ded6184ec3237924e1d489f9c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldr_DoKeyTest </td>
          <td>(</td>
          <td class="paramtype">ldr_Context_t *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loader action function tests for a key dictionary match. </p>
<p>This loader action function is one of three functions used to parse the key dictionary. It is called after a CBC-MAC entry from the dictionary has been read. If the value read is equal to the computed CBC-MAC, then the next encrypted chunk holds the session key (DEK), and the next action function will decrypt the key. Otherwise if there are remaining entries in the dictionary, the next action will get the next CBC-MAC to test.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Pointer to a loader context structure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>context-&gt;dek holds the CBC-MAC computed over the header. </dd>
<dd>
context-&gt;src holds a CBC-MAC value from the dictionary.</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>if CBC-MAC matches we transition to decrypt the DEK </dd>
<dd>
context-&gt;keyCount is updated to the remaining number of keys to test.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SUCCESS</td><td></td></tr>
    <tr><td class="paramname">ERROR_ROM_LDR_KEY_NOT_FOUND</td><td>if there are no more entries in the dictionary and a CBC-MAC match was not found. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga0496db4b513d904caa7cff9bfd3a3b1a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldr_DoLoadBytes </td>
          <td>(</td>
          <td class="paramtype">ldr_Context_t *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loader action function loads the trailing "ragged edge bytes". </p>
<p>Implements the second of two action functions for the boot "load" command. The last move sequence for the load command moves the final payload chunk. This function checks the payload CRC, then copies the final load bytes to the load destination.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Pointer to a loader context structure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>context-&gt;bootCmd contains the boot command. </dd>
<dd>
context-&gt;src contains the final decrypted payload chunk. </dd>
<dd>
context-&gt;crc32 holds the CRC calculated over the entire payload.</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>*context is setup to get the next boot command. </dd></dl>

</div>
</div>
<a class="anchor" id="gad336bbae43e8ca08f9300397b316d0bb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a> ldr_DoLoadChunks </td>
          <td>(</td>
          <td class="paramtype">ldr_Context_t *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loader action function loads data chunks. </p>
<p>Implements the first of two action functions for the boot "load" command. Loads one or more complete "chunk size" blocks of data.</p>
<p>If the amount of data remaining to load is one chunk or less, it sets the state sequence to move the next chunk. The action function is changed to <a class="el" href="group__sbloader.html#ga0496db4b513d904caa7cff9bfd3a3b1a">ldr_DoLoadBytes</a>, which will check the payload CRC and copy to the correct location.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Pointer to a loader context structure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>context-&gt;bootCmd contains the boot command.</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>context-&gt;bootCmd is adjusted to reflect the previous move. </dd>
<dd>
context-&gt;Action is set to move the next received payload.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">kStatus_Success</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga179d2dbc48908c8880f0d1c38fdf0118"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a> ldr_DoLoadCmd </td>
          <td>(</td>
          <td class="paramtype">ldr_Context_t *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loader "load" command handler. </p>
<p>Implements the first command handler called for the boot "load" command. The load action is split into two functions:</p><ul>
<li><a class="el" href="group__sbloader.html#gad336bbae43e8ca08f9300397b316d0bb">ldr_DoLoadChunks</a>, loads chunks</li>
<li><a class="el" href="group__sbloader.html#ga0496db4b513d904caa7cff9bfd3a3b1a">ldr_DoLoadBytes</a>, loads the trailing "ragged edge bytes" This function initializes the context before calling load action.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Pointer to a loader context structure. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga16375b0cc8350f605d7cf5f2c2302b99"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a> ldr_DoTagCmd </td>
          <td>(</td>
          <td class="paramtype">ldr_Context_t *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loader "tag" command handler. </p>
<p>Implements the action function for the boot "tag" command.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Pointer to a loader context structure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>context-&gt;bootCmd contains the boot command.</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>*context is setup to get the next boot command. </dd>
<dd>
context-&gt;sectChunks is updated to the next section.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">kStatusRomLdrSectionLength</td><td>if new section count is out of range. </td></tr>
    <tr><td class="paramname">kStatusRomLdrIdNotFound</td><td>if no match and no more sections. </td></tr>
    <tr><td class="paramname">Return</td><td>code from ldr_GoToNextSection. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga6c85e96bf9b72b3f2e34385dbfe8b97f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldr_GoToNextSection </td>
          <td>(</td>
          <td class="paramtype">ldr_Context_t *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loader utilities. </p>
<p>Skip ahead to the next "tag" command.</p>
<p>function will set up the skipCount to skip over the remainder of any section  you are currently in. If encryption is enabled it will also re-init the encryption  to begin on the new section it arrives at.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">kStatus_Success</td><td></td></tr>
    <tr><td class="paramname">kStatusRomLdrEOFReached</td><td>if the end of the image file is reached. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ga44f04e86cd75f107e97ea3f948fc65c7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t s_aesKey[AES_128_KEY_SIZE_WORDS]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pointer for the aes which will for now be a null pointer unless in debug mode we will try to read from the config area </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Jun 3 2015 16:21:26 for Kinetis Bootloader by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
