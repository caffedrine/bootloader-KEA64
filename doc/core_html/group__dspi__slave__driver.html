<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Kinetis Bootloader: DSPI Slave Driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Kinetis Bootloader
   &#160;<span id="projectnumber">1.2.0</span>
   </div>
   <div id="projectbrief">Common bootloader for Kinetis devices</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Introduction</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__dspi__slave__driver.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a>  </div>
  <div class="headertitle">
<div class="title">DSPI Slave Driver<div class="ingroups"><a class="el" href="group__drivers.html">Device Drivers</a> &raquo; <a class="el" href="group__dspi__driver.html">DSPI</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>DSPI slave mode peripheral driver.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for DSPI Slave Driver:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><div class="center"><iframe scrolling="no" frameborder="0" src="group__dspi__slave__driver.svg" width="234" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structdspi__slave__callbacks__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__slave__driver.html#structdspi__slave__callbacks__t">dspi_slave_callbacks_t</a></td></tr>
<tr class="memdesc:structdspi__slave__callbacks__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">The set of callbacks used for the DSPI slave mode.  <a href="group__dspi__slave__driver.html#structdspi__slave__callbacks__t">More...</a><br /></td></tr>
<tr class="separator:structdspi__slave__callbacks__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structdspi__slave__state__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__slave__driver.html#structdspi__slave__state__t">dspi_slave_state_t</a></td></tr>
<tr class="memdesc:structdspi__slave__state__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runtime state of the DSPI slave driver.  <a href="group__dspi__slave__driver.html#structdspi__slave__state__t">More...</a><br /></td></tr>
<tr class="separator:structdspi__slave__state__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structdspi__slave__user__config__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__slave__driver.html#structdspi__slave__user__config__t">dspi_slave_user_config_t</a></td></tr>
<tr class="memdesc:structdspi__slave__user__config__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">User configuration structure and callback functions for the DSPI slave driver.  <a href="group__dspi__slave__driver.html#structdspi__slave__user__config__t">More...</a><br /></td></tr>
<tr class="separator:structdspi__slave__user__config__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Init and shutdown</h2></td></tr>
<tr class="memitem:ga0e891f0113c47e6543aa2133113ab29b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__slave__driver.html#ga0e891f0113c47e6543aa2133113ab29b">dspi_slave_init</a> (uint32_t instance, const <a class="el" href="group__dspi__slave__driver.html#structdspi__slave__user__config__t">dspi_slave_user_config_t</a> *slaveConfig, <a class="el" href="group__dspi__slave__driver.html#structdspi__slave__state__t">dspi_slave_state_t</a> *dspiState)</td></tr>
<tr class="memdesc:ga0e891f0113c47e6543aa2133113ab29b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a DSPI instance for slave mode operation.  <a href="#ga0e891f0113c47e6543aa2133113ab29b">More...</a><br /></td></tr>
<tr class="separator:ga0e891f0113c47e6543aa2133113ab29b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0a67623638732516c9d898c2394e0468"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__slave__driver.html#ga0a67623638732516c9d898c2394e0468">dspi_slave_shutdown</a> (<a class="el" href="group__dspi__slave__driver.html#structdspi__slave__state__t">dspi_slave_state_t</a> *dspiState)</td></tr>
<tr class="memdesc:ga0a67623638732516c9d898c2394e0468"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shutdown a DSPI instance. Resets the DSPI peripheral, disables the interrupt to the core, and gates its clock.  <a href="#ga0a67623638732516c9d898c2394e0468">More...</a><br /></td></tr>
<tr class="separator:ga0a67623638732516c9d898c2394e0468"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Usage Information</h2>
<p>DSPI slave mode peripheral driver. </p>


<h3><a class="anchor" id="dspislave"></a>DSPI Slave Driver</h3><div class="textblock"><h1>Overview</h1>
The DSPI slave peripheral driver provides an easy way to use a SPI peripheral in slave mode.Data transfer is performed entirely through a couple of callback functions.<h1>Runtime state of the DSPI slave driver</h1>
This struct holds data that are used by the DSPI slave peripheral driver to communicate between the transfer function and the interrupt handler. The user just needs to pass in the memory for this structure, the driver will take care of filling out the members.<h1>Callbacks</h1>
To use this driver, you first need to define a few application callbacks. These are the callbacks functions that are set in the <a class="el" href="group__dspi__slave__driver.html#structdspi__slave__callbacks__t" title="The set of callbacks used for the DSPI slave mode. ">dspi_slave_callbacks_t</a> struct.The three callbacks are:</p><ul>
<li>Data source</li>
<li>Data sink</li>
<li>Error notification</li>
</ul>
The first two callbacks are for sending and receiving data. The third callback is invoked if an error occurs.The prototypes for the three callbacks are: </p><div class="fragment"><div class="line"><a class="code" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a> data_source(uint8_t * sourceWord, uint32_t instance);</div>
<div class="line"></div>
<div class="line"><a class="code" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a> data_sink(uint8_t sinkWord, uint32_t instance);</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> on_error(<a class="code" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a> error, uint32_t instance);</div>
</div><!-- fragment -->All callbacks are invoked from IRQ state.<h1>Setup</h1>
To initialize the DSPI slave driver, first create and fill in a <a class="el" href="group__dspi__slave__driver.html#structdspi__slave__user__config__t" title="User configuration structure and callback functions for the DSPI slave driver. ">dspi_slave_user_config_t</a> struct. This struct defines the callbacks as well as the data format settings for the SPI peripheral. The struct is not required after the driver is initialized, so it can be allocated on the stack. You'll also have to pass in memory for the run-time state structure.Here is an example config struct definition: </p><div class="fragment"><div class="line"><span class="comment">/* Set up and init the slave  */</span></div>
<div class="line"><a class="code" href="group__dspi__slave__driver.html#structdspi__slave__state__t">dspi_slave_state_t</a> dspiSlaveState;</div>
<div class="line"></div>
<div class="line"><a class="code" href="group__dspi__slave__driver.html#structdspi__slave__user__config__t">dspi_slave_user_config_t</a> slaveUserConfig;</div>
<div class="line">slaveUserConfig.<a class="code" href="group__dspi__slave__driver.html#a1e227bf6d817e2cfc2ddf55e0769d8f6">callbacks</a>.<a class="code" href="group__dspi__slave__driver.html#a2d1cec4eb52d93cd4d697cf3c66991d0">dataSink</a> = data_sink;</div>
<div class="line">slaveUserConfig.<a class="code" href="group__dspi__slave__driver.html#a1e227bf6d817e2cfc2ddf55e0769d8f6">callbacks</a>.<a class="code" href="group__dspi__slave__driver.html#a60303cc6a56f2985c57ebccd674c3d71">dataSource</a> = data_source;</div>
<div class="line">slaveUserConfig.<a class="code" href="group__dspi__slave__driver.html#a1e227bf6d817e2cfc2ddf55e0769d8f6">callbacks</a>.<a class="code" href="group__dspi__slave__driver.html#a9e50e5968fdbae9c5bf0e238bf9e609b">onError</a> = on_error;</div>
<div class="line">slaveUserConfig.<a class="code" href="group__dspi__slave__driver.html#aff4e671b1e66c0ac5b032b64d536c08f">dataConfig</a>.<a class="code" href="group__dspi__hal.html#ga99d8d0dec68d5d2c1de35f8bb8b66a75">bitsPerFrame</a> = 16;</div>
<div class="line">slaveUserConfig.<a class="code" href="group__dspi__slave__driver.html#aff4e671b1e66c0ac5b032b64d536c08f">dataConfig</a>.<a class="code" href="group__dspi__hal.html#gad751cbe15bfe01f02088e2a36059774a">clkPhase</a> = <a class="code" href="group__dspi__types.html#gga4269ec144334dd60666a92e6fd2c1476ada723d5970a0b0a28d96a0e707cabd9c">kDspiClockPhase_FirstEdge</a>;</div>
<div class="line">slaveUserConfig.<a class="code" href="group__dspi__slave__driver.html#aff4e671b1e66c0ac5b032b64d536c08f">dataConfig</a>.<a class="code" href="group__dspi__hal.html#ga8926c27980536d08b063f984cc5dc751">clkPolarity</a> = <a class="code" href="group__dspi__types.html#gga1e0a9074742794ef89f597d220296651afffdb6de18c3b46c509c406ac7230586">kDspiClockPolarity_ActiveHigh</a>;</div>
<div class="line">slaveUserConfig.isModifiedTimingFormatEnabled = <span class="keyword">false</span>;</div>
<div class="line"></div>
<div class="line"><a class="code" href="group__dspi__slave__driver.html#ga0e891f0113c47e6543aa2133113ab29b">dspi_slave_init</a>(slaveInstance, &amp;slaveUserConfig, &amp;dspiSlaveState);</div>
</div><!-- fragment --> </div><hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structdspi__slave__callbacks__t" id="structdspi__slave__callbacks__t"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct dspi_slave_callbacks_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>The set of callbacks used for the DSPI slave mode. </p>
<p>The user will need to create the function implementations. </p>
</div><table class="memberdecls">
<tr><td colspan="2"><h3>Data Fields</h3></td></tr>
<tr class="memitem:a60303cc6a56f2985c57ebccd674c3d71"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__slave__driver.html#a60303cc6a56f2985c57ebccd674c3d71">dataSource</a> )(uint8_t *sourceWord, uint32_t instance)</td></tr>
<tr class="separator:a60303cc6a56f2985c57ebccd674c3d71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d1cec4eb52d93cd4d697cf3c66991d0"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__slave__driver.html#a2d1cec4eb52d93cd4d697cf3c66991d0">dataSink</a> )(uint8_t sinkWord, uint32_t instance)</td></tr>
<tr class="separator:a2d1cec4eb52d93cd4d697cf3c66991d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e50e5968fdbae9c5bf0e238bf9e609b"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__slave__driver.html#a9e50e5968fdbae9c5bf0e238bf9e609b">onError</a> )(<a class="el" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a> error, uint32_t instance)</td></tr>
<tr class="separator:a9e50e5968fdbae9c5bf0e238bf9e609b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h4 class="groupheader">Field Documentation</h4>
<a class="anchor" id="a2d1cec4eb52d93cd4d697cf3c66991d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* dspi_slave_callbacks_t::dataSink) (uint8_t sinkWord, uint32_t instance)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Callback used to put received word </p>

</div>
</div>
<a class="anchor" id="a60303cc6a56f2985c57ebccd674c3d71"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* dspi_slave_callbacks_t::dataSource) (uint8_t *sourceWord, uint32_t instance)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Callback used to get word to transmit </p>

</div>
</div>
<a class="anchor" id="a9e50e5968fdbae9c5bf0e238bf9e609b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* dspi_slave_callbacks_t::onError) (<a class="el" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a> error, uint32_t instance)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Callback used to report a DSPI error, such as an under-run or over-run error </p>

</div>
</div>

</div>
</div>
<a name="structdspi__slave__state__t" id="structdspi__slave__state__t"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct dspi_slave_state_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Runtime state of the DSPI slave driver. </p>
<p>This struct holds data that are used by the DSPI slave peripheral driver to communicate between the transfer function and the interrupt handler. The user just needs to pass in the memory for this structure, the driver will take care of filling out the members. </p>
</div><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for dspi_slave_state_t:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="structdspi__slave__state__t__coll__graph.svg" width="166" height="127"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a73eb268cc85ee42807900041803867a6"></a>uint32_t</td>
<td class="fieldname">
bitsPerFrame</td>
<td class="fielddoc">
<p>Desired number of bits per frame </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="aee931509f444ea251e70b3413ce4b5ef"></a><a class="el" href="group__dspi__slave__driver.html#structdspi__slave__callbacks__t">dspi_slave_callbacks_t</a></td>
<td class="fieldname">
callbacks</td>
<td class="fielddoc">
<p>Application/user callbacks. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a8bfc2563970f46557491f2c68de7ad5e"></a>uint32_t</td>
<td class="fieldname">
instance</td>
<td class="fielddoc">
<p>DSPI module instance number </p>
</td></tr>
</table>

</div>
</div>
<a name="structdspi__slave__user__config__t" id="structdspi__slave__user__config__t"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct dspi_slave_user_config_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>User configuration structure and callback functions for the DSPI slave driver. </p>
</div><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Collaboration diagram for dspi_slave_user_config_t:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="structdspi__slave__user__config__t__coll__graph.svg" width="363" height="127"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a1e227bf6d817e2cfc2ddf55e0769d8f6"></a><a class="el" href="group__dspi__slave__driver.html#structdspi__slave__callbacks__t">dspi_slave_callbacks_t</a></td>
<td class="fieldname">
callbacks</td>
<td class="fielddoc">
<p>Application/user callbacks. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="aff4e671b1e66c0ac5b032b64d536c08f"></a><a class="el" href="group__dspi__hal.html#structdspi__data__format__config__t">dspi_data_format_config_t</a></td>
<td class="fieldname">
dataConfig</td>
<td class="fielddoc">
<p>Data format configuration structure </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga0e891f0113c47e6543aa2133113ab29b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__platform__status.html#gaaabdaf7ee58ca7269bd4bf24efcde092">status_t</a> dspi_slave_init </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__dspi__slave__driver.html#structdspi__slave__user__config__t">dspi_slave_user_config_t</a> *&#160;</td>
          <td class="paramname"><em>slaveConfig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__dspi__slave__driver.html#structdspi__slave__state__t">dspi_slave_state_t</a> *&#160;</td>
          <td class="paramname"><em>dspiState</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a DSPI instance for slave mode operation. </p>
<p>This function saves the callbacks to the run-time state structure for later use in the interrupt handler. It also ungates the clock to the DSPI module, initializes the DSPI for slave mode, enables the module and corresponding interrupts. Once initialized, the DSPI module is configured in slave mode and ready to receive data from a SPI master. The following is an example of how to set up the <a class="el" href="group__dspi__slave__driver.html#structdspi__slave__state__t" title="Runtime state of the DSPI slave driver. ">dspi_slave_state_t</a> and the <a class="el" href="group__dspi__slave__driver.html#structdspi__slave__user__config__t" title="User configuration structure and callback functions for the DSPI slave driver. ">dspi_slave_user_config_t</a> parameters and how to call the dspi_slave_init function by passing in these parameters: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;dspi_slave_state_t dspiSlaveState; &lt;- the user simply allocates memory for this struct</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;dspi_slave_user_config_t slaveUserConfig;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;slaveUserConfig.callbacks.dataSink = data_sink; &lt;- set to user implementation of function</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;slaveUserConfig.callbacks.dataSource = data_source; &lt;- set to user implementation of function</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;slaveUserConfig.callbacks.onError = on_error; &lt;- set to user implementation of function</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;slaveUserConfig.dataConfig.bitsPerFrame = 16;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;slaveUserConfig.dataConfig.clkPhase = kDspiClockPhase_FirstEdge;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;slaveUserConfig.dataConfig.clkPolarity = kDspiClockPolarity_ActiveHigh;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;dspi_slave_init(slaveInstance, &amp;slaveUserConfig, &amp;dspiSlaveState);</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>The instance number of the DSPI peripheral. </td></tr>
    <tr><td class="paramname">dspiState</td><td>The pointer to the DSPI slave driver state structure. </td></tr>
    <tr><td class="paramname">user</td><td>The configuration structure of type <a class="el" href="group__dspi__slave__driver.html#structdspi__slave__user__config__t" title="User configuration structure and callback functions for the DSPI slave driver. ">dspi_slave_user_config_t</a>, including the callbacks.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An error code or kStatus_Success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga0a67623638732516c9d898c2394e0468"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dspi_slave_shutdown </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__dspi__slave__driver.html#structdspi__slave__state__t">dspi_slave_state_t</a> *&#160;</td>
          <td class="paramname"><em>dspiState</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shutdown a DSPI instance. Resets the DSPI peripheral, disables the interrupt to the core, and gates its clock. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dspiState</td><td>The pointer to the DSPI slave driver state structure. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Jun 3 2015 16:21:26 for Kinetis Bootloader by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
